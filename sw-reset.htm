<!doctype html>
<meta charset="utf-8">
<title>SW Reset</title>
<h1>Service Worker Reset</h1>
<p>登録済みのSWを全削除します。完了後に自動でトップへ戻ります。</p>
<script>
(async () => {
  if ('serviceWorker' in navigator) {
    const regs = await navigator.serviceWorker.getRegistrations();
    for (const r of regs) { try { await r.unregister(); } catch(e){} }
    // キャッシュも掃除（あれば）
    if ('caches' in window) {
      const names = await caches.keys();
      for (const n of names) { try { await caches.delete(n); } catch(e){} }
    }
  }
  // 2秒待ってトップへ
  setTimeout(()=>location.href='index.html?after_reset=1', 1500);
})();
</script>
